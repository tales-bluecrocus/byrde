@use "sass:meta";
@use "sass:math";
@use "variables" as *;

@mixin max($breakpoint) {
	@if math.is-unitless($breakpoint) {
		$breakpoint: $breakpoint * 1px;
	}
	@media (max-width: $breakpoint) {
		@content;
	}
}

@mixin min($breakpoint) {
	@if math.is-unitless($breakpoint) {
		$breakpoint: $breakpoint * 1px;
	}
	@media (min-width: $breakpoint) {
		@content;
	}
}

@mixin between($min, $max) {
	@if math.is-unitless($min) {
		$min: $min * 1px;
	}
	@if math.is-unitless($max) {
		$max: $max * 1px;
	}
	@media (min-width: $min) and (max-width: $max) {
		@content;
	}
}

// Typography Mixins
@mixin h1 {
	font-family: font-family("primary");
	font-size: font-size("5xl");
	font-weight: 700;
	line-height: line-height("tight");
	color: text-color("heading");
}

@mixin h2 {
	font-family: font-family("primary");
	font-size: font-size("4xl");
	font-weight: 700;
	line-height: line-height("tight");
	color: text-color("heading");
}

@mixin h3 {
	font-family: font-family("primary");
	font-size: font-size("3xl");
	font-weight: 700;
	line-height: line-height("tight");
	color: text-color("heading");
}

@mixin h4 {
	font-family: font-family("primary");
	font-size: font-size("2xl");
	font-weight: 700;
	line-height: line-height("tight");
	color: text-color("heading");
}

// Button Mixins
@mixin btn-base {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: spacing("xs");
	padding: 0.75rem 1.75rem;
	border-radius: radius("md");
	font-family: font-family("primary");
	font-size: font-size("md");
	font-weight: 700;
	line-height: 1;
	text-align: center;
	text-decoration: none !important;
	cursor: pointer;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	white-space: nowrap;
	user-select: none;

	&:hover {
		opacity: 1;
	}

	&:active {
		transform: translateY(0);
	}

	&:disabled {
		opacity: 0.8;
		cursor: not-allowed;
		transform: none;
		box-shadow: none;
	}

	i {
		font-size: 1.2em;
	}
}

@mixin btn-primary {
	background-color: color(primary, 600);
	color: var(--color-text-inverse);
	border: 2px solid color(primary, 600);

	&:hover,
	&:focus {
		background-color: color(primary, 700);
		border-color: color(primary, 700);
		color: var(--color-text-inverse);
		text-decoration: none;
	}

	&:active {
		background-color: color(primary, 800);
		border-color: color(primary, 800);
	}

	&:disabled {
		background-color: color(primary, 400);
		border-color: color(primary, 400);
		opacity: 0.6;
		cursor: not-allowed;
	}

	a, a:hover {
		color: var(--color-text-inverse);
		text-decoration: none;
	}
}

@mixin btn-secondary {
	background-color: color(secondary, 500);
	color: var(--color-text-inverse);
	border: 2px solid color(secondary, 500);

	&:hover,
	&:focus {
		background-color: color(secondary, 600);
		border-color: color(secondary, 600);
		color: var(--color-text-inverse);
		text-decoration: none;
	}

	&:active {
		background-color: color(secondary, 700);
		border-color: color(secondary, 700);
	}

	&:disabled {
		background-color: color(secondary, 400);
		border-color: color(secondary, 400);
		opacity: 0.6;
		cursor: not-allowed;
	}

	a, a:hover {
		color: var(--color-text-inverse);
		text-decoration: none;
	}
}

@mixin btn-alternative {
	background-color: color(accent, 500);
	color: var(--color-text-inverse);
	border: 2px solid color(accent, 500);

	&:hover,
	&:focus {
		background-color: color(accent, 600);
		border-color: color(accent, 600);
		color: var(--color-text-inverse);
		text-decoration: none;
	}

	&:active {
		background-color: color(accent, 700);
		border-color: color(accent, 700);
	}

	&:disabled {
		background-color: color(accent, 400);
		border-color: color(accent, 400);
		opacity: 0.6;
		cursor: not-allowed;
	}

	a, a:hover {
		color: var(--color-text-inverse);
		text-decoration: none;
	}
}

// ============================================
// THEME & CONTRAST PROTECTION
// ============================================

@mixin section-theme($type) {
	@if $type == "primary" {
		background-color: color(primary, 600);
		color: color(primary, 50);

		h1, h2, h3, h4, h5, h6, p, li {
			color: inherit;
		}

		a:not(.btn) {
			color: color(primary, 200);
			transition: color 0.3s ease;

			&:hover {
				color: color(primary, 100);
			}
		}
	} @else if $type == "secondary" {
		background-color: color(secondary, 500);
		color: color(secondary, 50);

		h1, h2, h3, h4, h5, h6, p, li {
			color: inherit;
		}

		a:not(.btn) {
			color: color(secondary, 100);
			transition: color 0.3s ease;

			&:hover {
				color: color(secondary, 50);
			}
		}
	} @else if $type == "alternative" {
		// Alias para accent (retrocompatibilidade)
		background-color: color(accent, 500);
		color: color(accent, 50);

		h1, h2, h3, h4, h5, h6, p, li {
			color: inherit;
		}

		a:not(.btn) {
			color: color(accent, 100);
			transition: color 0.3s ease;

			&:hover {
				color: color(accent, 50);
			}
		}
	} @else if $type == "gray" {
		background-color: color(neutral, 100);
		color: color(neutral, 900);

		a:not(.btn) {
			color: color(secondary, 500);

			&:hover {
				color: color(secondary, 600);
			}
		}
	} @else if $type == "white" {
		background-color: color(neutral, 50);
		color: color(neutral, 900);

		a:not(.btn) {
			color: color(secondary, 500);

			&:hover {
				color: color(secondary, 600);
			}
		}
	}
}

// ============================================
// NEW UTILITY MIXINS
// ============================================

@mixin overlay($opacity: 0.1, $color: white) {
	@if $color == white {
		background-color: rgba(255, 255, 255, $opacity);
	} @else {
		background-color: rgba(0, 0, 0, $opacity);
	}
	backdrop-filter: blur(10px);
}

@mixin focus-ring($color: accent) {
	outline: 2px solid color($color, 500);
	outline-offset: 2px;
}
