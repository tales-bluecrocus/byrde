@use "sass:map";
@use "sass:string";
@use "sass:color";
@use "sass:math";

@use "fonts";

// ============================================
// DESIGN TOKENS (Generated by PHP)
// ============================================
// CSS Custom Properties são gerados via PHP em inc/acf/theme-settings.php
// Escalas disponíveis: --primary-50 até --primary-900 (9 shades) para cada cor
// Cores: primary, secondary, accent, success, warning, error, info, neutral
// Tokens semânticos: --color-bg-primary, --color-text-muted, --color-border-default, etc.

// ============================================
// SASS VARIABLES (Semantic Tokens)
// ============================================

// Cores primárias da marca
$primary-bg: var(--color-bg-primary);
$primary-text: var(--color-text-inverse);
$primary-link: var(--color-link-inverse);

$secondary-bg: var(--color-bg-secondary);
$secondary-text: var(--color-text-inverse);
$secondary-link: var(--color-link-inverse);

$accent-bg: var(--color-bg-accent);
$accent-text: var(--color-text-inverse);
$accent-link: var(--color-link-inverse);

// Cores neutras
$bg-body: var(--color-bg-body);
$bg-surface: var(--color-bg-surface);
$text-primary: var(--color-text-primary);
$text-secondary: var(--color-text-secondary);
$text-muted: var(--color-text-muted);

// Bordas
$border-default: var(--color-border-default);
$border-emphasis: var(--color-border-emphasis);

// Links
$link-color: var(--color-link-default);
$link-color-hover: var(--color-link-hover);

// Aliases para retrocompatibilidade
$alternative-bg: $accent-bg;
$alternative-text: $accent-text;
$alternative-link: $accent-link;

$btn-primary-bg: $primary-bg;
$btn-primary-text: $primary-text;
$btn-secondary-bg: $secondary-bg;
$btn-secondary-text: $secondary-text;
$btn-alternative-bg: $accent-bg;
$btn-alternative-text: $accent-text;

// ============================================
// UTILITIES (Fluid Typography)
// ============================================

$container-max-width: 1280;
$mobile-breakpoint: 375;

@function fluid($min-size, $max-size, $min-breakpoint: $mobile-breakpoint, $max-breakpoint: $container-max-width) {
	$slope: math.div($max-size - $min-size, $max-breakpoint - $min-breakpoint);
	$y-axis-intersection: -$min-breakpoint * $slope + $min-size;
	
	$min-size-rem: math.div($min-size, 16) * 1rem;
	$max-size-rem: math.div($max-size, 16) * 1rem;
	$slope-vw: $slope * 100;
	$intercept-rem: math.div($y-axis-intersection, 16) * 1rem;

	@return clamp(#{$min-size-rem}, #{$slope-vw}vw + #{$intercept-rem}, #{$max-size-rem});
}

// ============================================
// HELPER FUNCTIONS
// ============================================

// Acessar escala de cores diretamente
@function color($name, $shade: 500) {
	@return var(--#{$name}-#{$shade});
}

// Mapa de cores de texto
$text-color: (
	"heading": $text-primary,
	"body": $text-secondary,
	"muted": $text-muted,
	"primary": $primary-bg,
	"secondary": $secondary-bg,
	"accent": $accent-bg,
	"alternative": $alternative-bg,
	"inverse": var(--color-text-inverse),
	"success": var(--color-success-text),
	"warning": var(--color-warning-text),
	"error": var(--color-error-text),
	"info": var(--color-info-text),
);

@function text-color($key) {
	@return map.get($text-color, $key);
}

// Mapa de backgrounds
$bg-color: (
	"primary": $primary-bg,
	"secondary": $secondary-bg,
	"accent": $accent-bg,
	"alternative": $alternative-bg,
	"body": $bg-body,
	"surface": $bg-surface,
	"white": var(--color-bg-body), // Alias
	"gray": var(--color-bg-surface), // Alias
	"success": var(--color-success-bg),
	"warning": var(--color-warning-bg),
	"error": var(--color-error-bg),
	"info": var(--color-info-bg),
);

@function bg-color($key) {
	@return map.get($bg-color, $key);
}

// Mapa de sombras
$shadow: (
	"sm": 0 1px 2px 0 rgba(var(--shadow-sm-rgb), 0.05),
	"md": 0 4px 6px -1px rgba(var(--shadow-md-rgb), 0.1),
	"lg": 0 10px 15px -3px rgba(var(--shadow-lg-rgb), 0.1),
	"xl": 0 20px 25px -5px rgba(var(--shadow-lg-rgb), 0.1),
);

@function shadow($key) {
	@return map.get($shadow, $key);
}

// ============================================
// TYPOGRAPHY
// ============================================

$font-family: (
	"primary": fonts.$font-family-primary,
	"secondary": fonts.$font-family-secondary,
	"heading": fonts.$font-family-primary,
	"body": fonts.$font-family-secondary,
);

@function font-family($key) {
	@return map.get($font-family, $key);
}

$font-size: (
	"xs": fluid(10, 12),
	"sm": fluid(12, 14),
	"md": fluid(14, 16),
	"lg": fluid(16, 18),
	"xl": fluid(18, 20),
	"2xl": fluid(20, 24),
	"3xl": fluid(24, 30),
	"4xl": fluid(30, 36),
	"5xl": fluid(36, 48),
	"6xl": fluid(42, 60),
	"7xl": fluid(48, 72),
);

@function font-size($key) {
	@return map.get($font-size, $key);
}

$line-height: (
	"none": 1,
	"tight": 1.2,
	"snug": 1.375,
	"normal": 1.5,
	"relaxed": 1.625,
	"loose": 2,
);

@function line-height($key) {
	@return map.get($line-height, $key);
}

// ============================================
// SPACING & SIZING
// ============================================

$spacing: (
	"none": 0,
	"xs": 0.5rem,
	"sm": 1rem,
	"md": 1.5rem,
	"lg": 2rem,
	"xl": 3rem,
	"2xl": 4rem,
	"3xl": 5rem,
	"4xl": 6rem,
);

@function spacing($key) {
	@return map.get($spacing, $key);
}

$radius: (
	"none": 0,
	"sm": 0.125rem,
	"md": 0.375rem,
	"lg": 0.5rem,
	"xl": 0.75rem,
	"full": 9999px,
);

@function radius($key) {
	@return map.get($radius, $key);
}

// ============================================
// GRID SYSTEM
// ============================================

$grid-columns: 12;
$grid-gutter: 1.5rem;
$container-padding: 1rem;
$tablet: 768px;
$mobile: 576px;
